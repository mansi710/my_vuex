{"ast":null,"code":"import shop from \"../shop\";\nexport default {\n  state: {\n    items: [],\n    checkoutStatus: null\n  },\n  getters: {\n    //for items\n    cartProducts(state, getters, rootState) {\n      return state.items.map(cartItem => {\n        const product = rootState.products.find(product => product.id === cartItem.id);\n        return {\n          title: product.title,\n          price: product.price,\n          quantity: cartItem.quantity\n        };\n      });\n    },\n\n    //items to total\n    cartTotal(state, getters) {\n      return getters.cartProducts.reduce((total, product) => total + product.price * product.quantity, 0);\n    }\n\n  },\n  mutations: {\n    pushProductToCart(state, productId) {\n      state.items.push({\n        id: productId,\n        quantity: 1\n      });\n    },\n\n    incrementItemQuantity(state, cartItem) {\n      cartItem.quantity++;\n    }\n\n  },\n  actions: {\n    addProductToCart({\n      state,\n      commit,\n      getters,\n      rootState\n    }\n    /**context*/\n    , product) {\n      // if (product.inventory > 0)\n      if (getters.productIsInStock(product)) {\n        //find cartItem\n        const cartItem = state.items.find(item => item.id === product.id);\n\n        if (!cartItem) {\n          //pushProductToCart\n          commit(\"pushProductToCart\", product.id);\n        } else {\n          //incrementItemQuantity\n          commit(\"incrementItemQuantity\", cartItem);\n        }\n\n        commit(\"decrementProductInventory\", product);\n      }\n    },\n\n    checkout({\n      state,\n      commit\n    }) {\n      shop.buyProducts(state.items, () => {\n        commit(\"emptyCart\");\n        commit(\"setCheckoutStatus\", \"success\");\n      }, () => {\n        commit(\"setCheckoutStatus\", \"fail\");\n      });\n    }\n\n  }\n};","map":{"version":3,"names":["shop","state","items","checkoutStatus","getters","cartProducts","rootState","map","cartItem","product","products","find","id","title","price","quantity","cartTotal","reduce","total","mutations","pushProductToCart","productId","push","incrementItemQuantity","actions","addProductToCart","commit","productIsInStock","item","checkout","buyProducts"],"sources":["/var/www/html/newData/mansi/vuex/src/store/modules/cart.js"],"sourcesContent":["import shop from \"../shop\";\nexport default {\n  state: {\n    items: [],\n    checkoutStatus: null,\n  },\n  getters: {\n    //for items\n    cartProducts(state, getters, rootState) {\n      return state.items.map((cartItem) => {\n        const product = rootState.products.find(\n          (product) => product.id === cartItem.id\n        );\n        return {\n          title: product.title,\n          price: product.price,\n          quantity: cartItem.quantity,\n        };\n      });\n    },\n\n    //items to total\n    cartTotal(state, getters) {\n      return getters.cartProducts.reduce(\n        (total, product) => total + product.price * product.quantity,\n        0\n      );\n    },\n  },\n  mutations: {\n    pushProductToCart(state, productId) {\n      state.items.push({\n        id: productId,\n        quantity: 1,\n      });\n    },\n\n    incrementItemQuantity(state, cartItem) {\n      cartItem.quantity++;\n    },\n  },\n  actions: {\n    addProductToCart(\n      { state, commit, getters, rootState } /**context*/,\n      product\n    ) {\n      // if (product.inventory > 0)\n      if (getters.productIsInStock(product)) {\n        //find cartItem\n        const cartItem = state.items.find((item) => item.id === product.id);\n        if (!cartItem) {\n          //pushProductToCart\n          commit(\"pushProductToCart\", product.id);\n        } else {\n          //incrementItemQuantity\n          commit(\"incrementItemQuantity\", cartItem);\n        }\n        commit(\"decrementProductInventory\", product);\n      }\n    },\n    checkout({ state, commit }) {\n      shop.buyProducts(\n        state.items,\n        () => {\n          commit(\"emptyCart\");\n          commit(\"setCheckoutStatus\", \"success\");\n        },\n        () => {\n          commit(\"setCheckoutStatus\", \"fail\");\n        }\n      );\n    },\n  },\n};\n"],"mappings":"AAAA,OAAOA,IAAP,MAAiB,SAAjB;AACA,eAAe;EACbC,KAAK,EAAE;IACLC,KAAK,EAAE,EADF;IAELC,cAAc,EAAE;EAFX,CADM;EAKbC,OAAO,EAAE;IACP;IACAC,YAAY,CAACJ,KAAD,EAAQG,OAAR,EAAiBE,SAAjB,EAA4B;MACtC,OAAOL,KAAK,CAACC,KAAN,CAAYK,GAAZ,CAAiBC,QAAD,IAAc;QACnC,MAAMC,OAAO,GAAGH,SAAS,CAACI,QAAV,CAAmBC,IAAnB,CACbF,OAAD,IAAaA,OAAO,CAACG,EAAR,KAAeJ,QAAQ,CAACI,EADvB,CAAhB;QAGA,OAAO;UACLC,KAAK,EAAEJ,OAAO,CAACI,KADV;UAELC,KAAK,EAAEL,OAAO,CAACK,KAFV;UAGLC,QAAQ,EAAEP,QAAQ,CAACO;QAHd,CAAP;MAKD,CATM,CAAP;IAUD,CAbM;;IAeP;IACAC,SAAS,CAACf,KAAD,EAAQG,OAAR,EAAiB;MACxB,OAAOA,OAAO,CAACC,YAAR,CAAqBY,MAArB,CACL,CAACC,KAAD,EAAQT,OAAR,KAAoBS,KAAK,GAAGT,OAAO,CAACK,KAAR,GAAgBL,OAAO,CAACM,QAD/C,EAEL,CAFK,CAAP;IAID;;EArBM,CALI;EA4BbI,SAAS,EAAE;IACTC,iBAAiB,CAACnB,KAAD,EAAQoB,SAAR,EAAmB;MAClCpB,KAAK,CAACC,KAAN,CAAYoB,IAAZ,CAAiB;QACfV,EAAE,EAAES,SADW;QAEfN,QAAQ,EAAE;MAFK,CAAjB;IAID,CANQ;;IAQTQ,qBAAqB,CAACtB,KAAD,EAAQO,QAAR,EAAkB;MACrCA,QAAQ,CAACO,QAAT;IACD;;EAVQ,CA5BE;EAwCbS,OAAO,EAAE;IACPC,gBAAgB,CACd;MAAExB,KAAF;MAASyB,MAAT;MAAiBtB,OAAjB;MAA0BE;IAA1B;IAAsC;IADxB,EAEdG,OAFc,EAGd;MACA;MACA,IAAIL,OAAO,CAACuB,gBAAR,CAAyBlB,OAAzB,CAAJ,EAAuC;QACrC;QACA,MAAMD,QAAQ,GAAGP,KAAK,CAACC,KAAN,CAAYS,IAAZ,CAAkBiB,IAAD,IAAUA,IAAI,CAAChB,EAAL,KAAYH,OAAO,CAACG,EAA/C,CAAjB;;QACA,IAAI,CAACJ,QAAL,EAAe;UACb;UACAkB,MAAM,CAAC,mBAAD,EAAsBjB,OAAO,CAACG,EAA9B,CAAN;QACD,CAHD,MAGO;UACL;UACAc,MAAM,CAAC,uBAAD,EAA0BlB,QAA1B,CAAN;QACD;;QACDkB,MAAM,CAAC,2BAAD,EAA8BjB,OAA9B,CAAN;MACD;IACF,CAlBM;;IAmBPoB,QAAQ,CAAC;MAAE5B,KAAF;MAASyB;IAAT,CAAD,EAAoB;MAC1B1B,IAAI,CAAC8B,WAAL,CACE7B,KAAK,CAACC,KADR,EAEE,MAAM;QACJwB,MAAM,CAAC,WAAD,CAAN;QACAA,MAAM,CAAC,mBAAD,EAAsB,SAAtB,CAAN;MACD,CALH,EAME,MAAM;QACJA,MAAM,CAAC,mBAAD,EAAsB,MAAtB,CAAN;MACD,CARH;IAUD;;EA9BM;AAxCI,CAAf"},"metadata":{},"sourceType":"module"}