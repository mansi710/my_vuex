{"ast":null,"code":"// import { resolve } from \"core-js/fn/promise\";\nimport { createStore } from \"vuex\"; // import store from \"./store\";\n\nimport shop from \"./shop\";\nexport default createStore({\n  state: {\n    //like data\n    products: [],\n    cart: []\n  },\n  getters: {\n    //like computed properties\n    productsCount() {},\n\n    availableProducts(state) {\n      return state.products.filter(product => product.inventory > 0);\n    },\n\n    //for cart\n    cartProducts(state) {\n      return state.cart.map(cartItem => {\n        const product = state.products.find(product => product.id === cartItem.id);\n        return {\n          title: product.title,\n          price: product.price,\n          quantity: cartItem.quantity\n        };\n      });\n    },\n\n    //cart to total\n    cartTotal(state, getters) {\n      let total = 0;\n      getters.cartProducts.forEach(product => {\n        total += product.proce * product.quantity;\n      });\n      return total;\n      return getters.cartProducts.reduce((total, product));\n    }\n\n  },\n  actions: {\n    //make the ajax call\n    //run setProducts mutation\n    fetchProducts({\n      commit\n    }) {\n      return new Promise(resolve => {\n        shop.getProducts(products => {\n          commit(\"setProducts\", products);\n          resolve();\n        });\n      });\n    },\n\n    // fetchProducts(context) {\n    //   shop.getProducts((products) => {\n    //     context.commit(\"setProducts\", products);\n    //   });\n    // },\n    addProductToCart(context, product) {\n      if (product.inventory > 0) {\n        //find cartItem\n        const cartItem = context.state.cart.find(item => item.id === product.id);\n\n        if (!cartItem) {\n          //pushProductToCart\n          context.commit(\"pushProductToCart\", product.id);\n        } else {\n          //incrementItemQuantity\n          context.commit(\"incrementItemQuantity\", cartItem);\n        }\n\n        context.commit(\"decrementProductInventory\", product);\n      }\n    }\n\n  },\n  mutations: {\n    //setting and updating state\n    //when state change\n    //and only responsible for updating just a piece of the state.\n    setProducts(state, products) {\n      state.products = products;\n    },\n\n    pushProductToCart(state, productId) {\n      state.cart.push({\n        id: productId,\n        quantity: 1\n      });\n    },\n\n    incrementItemQuantity(state, cartItem) {\n      cartItem.quantity++;\n    },\n\n    decrementProductInventory(state, product) {\n      product.inventory--;\n    }\n\n  }\n});","map":{"version":3,"names":["createStore","shop","state","products","cart","getters","productsCount","availableProducts","filter","product","inventory","cartProducts","map","cartItem","find","id","title","price","quantity","cartTotal","total","forEach","proce","reduce","actions","fetchProducts","commit","Promise","resolve","getProducts","addProductToCart","context","item","mutations","setProducts","pushProductToCart","productId","push","incrementItemQuantity","decrementProductInventory"],"sources":["/var/www/html/newData/mansi/vuex/src/store/shoppingcart.js"],"sourcesContent":["// import { resolve } from \"core-js/fn/promise\";\nimport { createStore } from \"vuex\";\n// import store from \"./store\";\nimport shop from \"./shop\";\nexport default createStore({\n  state: {\n    //like data\n    products: [],\n    cart: [],\n  },\n  getters: {\n    //like computed properties\n    productsCount() {},\n    availableProducts(state) {\n      return state.products.filter((product) => product.inventory > 0);\n    },\n\n    //for cart\n    cartProducts(state) {\n      return state.cart.map((cartItem) => {\n        const product = state.products.find(\n          (product) => product.id === cartItem.id\n        );\n        return {\n          title: product.title,\n          price: product.price,\n          quantity: cartItem.quantity,\n        };\n      });\n    },\n\n    //cart to total\n    cartTotal(state, getters) {\n      let total = 0;\n      getters.cartProducts.forEach((product) => {\n        total += product.proce * product.quantity;\n      });\n      return total;\n      return getters.cartProducts.reduce((total,product))\n    },\n  },\n  actions: {\n    //make the ajax call\n    //run setProducts mutation\n    fetchProducts({ commit }) {\n      return new Promise((resolve) => {\n        shop.getProducts((products) => {\n          commit(\"setProducts\", products);\n          resolve();\n        });\n      });\n    },\n\n    // fetchProducts(context) {\n    //   shop.getProducts((products) => {\n    //     context.commit(\"setProducts\", products);\n    //   });\n    // },\n\n    addProductToCart(context, product) {\n      if (product.inventory > 0) {\n        //find cartItem\n        const cartItem = context.state.cart.find(\n          (item) => item.id === product.id\n        );\n        if (!cartItem) {\n          //pushProductToCart\n          context.commit(\"pushProductToCart\", product.id);\n        } else {\n          //incrementItemQuantity\n          context.commit(\"incrementItemQuantity\", cartItem);\n        }\n        context.commit(\"decrementProductInventory\", product);\n      }\n    },\n  },\n  mutations: {\n    //setting and updating state\n    //when state change\n    //and only responsible for updating just a piece of the state.\n    setProducts(state, products) {\n      state.products = products;\n    },\n    pushProductToCart(state, productId) {\n      state.cart.push({\n        id: productId,\n        quantity: 1,\n      });\n    },\n\n    incrementItemQuantity(state, cartItem) {\n      cartItem.quantity++;\n    },\n\n    decrementProductInventory(state, product) {\n      product.inventory--;\n    },\n  },\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}