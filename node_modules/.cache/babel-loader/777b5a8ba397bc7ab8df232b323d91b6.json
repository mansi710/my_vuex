{"ast":null,"code":"import shop from \"../shop\";\nexport default {\n  namespaced: true,\n  state: {\n    items: [],\n    checkoutStatus: null\n  },\n  getters: {\n    //for items\n    //items to total\n    cartTotal(state, getters) {\n      return getters.cartProducts.reduce((total, product) => total + product.price * product.quantity, 0);\n    }\n\n  },\n  mutations: {\n    pushProductToCart(state, productId) {\n      state.items.push({\n        id: productId,\n        quantity: 1\n      });\n    },\n\n    incrementItemQuantity(state, cartItem) {\n      cartItem.quantity++;\n    },\n\n    setCheckoutStatus(state, status) {\n      state.checkoutStatus = status;\n    },\n\n    emptyCart(state) {\n      state.items = [];\n    }\n\n  },\n  actions: {\n    addProductToCart({\n      state,\n      commit,\n      rootGetters\n    }\n    /**context*/\n    , product) {\n      // if (product.inventory > 0)\n      if (rootGetters[\"products/productIsInStock\"](product)) {\n        //find cartItem\n        const cartItem = state.items.find(item => item.id === product.id);\n\n        if (!cartItem) {\n          //pushProductToCart\n          commit(\"pushProductToCart\", product.id);\n        } else {\n          //incrementItemQuantity\n          commit(\"incrementItemQuantity\", cartItem);\n        }\n\n        commit(\"products/decrementProductInventory\", product, {\n          root: true\n        });\n      }\n    },\n\n    checkout({\n      state,\n      commit\n    }) {\n      shop.buyProducts(state.items, () => {\n        commit(\"emptyCart\");\n        commit(\"setCheckoutStatus\", \"success\");\n      }, () => {\n        commit(\"setCheckoutStatus\", \"fail\");\n      });\n    }\n\n  }\n};","map":{"version":3,"names":["shop","namespaced","state","items","checkoutStatus","getters","cartTotal","cartProducts","reduce","total","product","price","quantity","mutations","pushProductToCart","productId","push","id","incrementItemQuantity","cartItem","setCheckoutStatus","status","emptyCart","actions","addProductToCart","commit","rootGetters","find","item","root","checkout","buyProducts"],"sources":["/var/www/html/newData/mansi/vuex/src/store/modules/cart.js"],"sourcesContent":["import shop from \"../shop\";\nexport default {\n  namespaced: true,\n  state: {\n    items: [],\n    checkoutStatus: null,\n  },\n  getters: {\n    //for items\n    \n\n    //items to total\n    cartTotal(state, getters) {\n      return getters.cartProducts.reduce(\n        (total, product) => total + product.price * product.quantity,\n        0\n      );\n    },\n  },\n  mutations: {\n    pushProductToCart(state, productId) {\n      state.items.push({\n        id: productId,\n        quantity: 1,\n      });\n    },\n\n    incrementItemQuantity(state, cartItem) {\n      cartItem.quantity++;\n    },\n    setCheckoutStatus(state, status) {\n      state.checkoutStatus = status;\n    },\n    emptyCart(state) {\n      state.items = [];\n    },\n  },\n  actions: {\n    addProductToCart({ state, commit, rootGetters } /**context*/, product) {\n      // if (product.inventory > 0)\n      if (rootGetters[\"products/productIsInStock\"](product)) {\n        //find cartItem\n        const cartItem = state.items.find((item) => item.id === product.id);\n        if (!cartItem) {\n          //pushProductToCart\n          commit(\"pushProductToCart\", product.id);\n        } else {\n          //incrementItemQuantity\n          commit(\"incrementItemQuantity\", cartItem);\n        }\n        commit(\"products/decrementProductInventory\", product, { root: true });\n      }\n    },\n\n    checkout({ state, commit }) {\n      shop.buyProducts(\n        state.items,\n        () => {\n          commit(\"emptyCart\");\n          commit(\"setCheckoutStatus\", \"success\");\n        },\n        () => {\n          commit(\"setCheckoutStatus\", \"fail\");\n        }\n      );\n    },\n  },\n};\n"],"mappings":"AAAA,OAAOA,IAAP,MAAiB,SAAjB;AACA,eAAe;EACbC,UAAU,EAAE,IADC;EAEbC,KAAK,EAAE;IACLC,KAAK,EAAE,EADF;IAELC,cAAc,EAAE;EAFX,CAFM;EAMbC,OAAO,EAAE;IACP;IAGA;IACAC,SAAS,CAACJ,KAAD,EAAQG,OAAR,EAAiB;MACxB,OAAOA,OAAO,CAACE,YAAR,CAAqBC,MAArB,CACL,CAACC,KAAD,EAAQC,OAAR,KAAoBD,KAAK,GAAGC,OAAO,CAACC,KAAR,GAAgBD,OAAO,CAACE,QAD/C,EAEL,CAFK,CAAP;IAID;;EAVM,CANI;EAkBbC,SAAS,EAAE;IACTC,iBAAiB,CAACZ,KAAD,EAAQa,SAAR,EAAmB;MAClCb,KAAK,CAACC,KAAN,CAAYa,IAAZ,CAAiB;QACfC,EAAE,EAAEF,SADW;QAEfH,QAAQ,EAAE;MAFK,CAAjB;IAID,CANQ;;IAQTM,qBAAqB,CAAChB,KAAD,EAAQiB,QAAR,EAAkB;MACrCA,QAAQ,CAACP,QAAT;IACD,CAVQ;;IAWTQ,iBAAiB,CAAClB,KAAD,EAAQmB,MAAR,EAAgB;MAC/BnB,KAAK,CAACE,cAAN,GAAuBiB,MAAvB;IACD,CAbQ;;IAcTC,SAAS,CAACpB,KAAD,EAAQ;MACfA,KAAK,CAACC,KAAN,GAAc,EAAd;IACD;;EAhBQ,CAlBE;EAoCboB,OAAO,EAAE;IACPC,gBAAgB,CAAC;MAAEtB,KAAF;MAASuB,MAAT;MAAiBC;IAAjB;IAA+B;IAAhC,EAA8ChB,OAA9C,EAAuD;MACrE;MACA,IAAIgB,WAAW,CAAC,2BAAD,CAAX,CAAyChB,OAAzC,CAAJ,EAAuD;QACrD;QACA,MAAMS,QAAQ,GAAGjB,KAAK,CAACC,KAAN,CAAYwB,IAAZ,CAAkBC,IAAD,IAAUA,IAAI,CAACX,EAAL,KAAYP,OAAO,CAACO,EAA/C,CAAjB;;QACA,IAAI,CAACE,QAAL,EAAe;UACb;UACAM,MAAM,CAAC,mBAAD,EAAsBf,OAAO,CAACO,EAA9B,CAAN;QACD,CAHD,MAGO;UACL;UACAQ,MAAM,CAAC,uBAAD,EAA0BN,QAA1B,CAAN;QACD;;QACDM,MAAM,CAAC,oCAAD,EAAuCf,OAAvC,EAAgD;UAAEmB,IAAI,EAAE;QAAR,CAAhD,CAAN;MACD;IACF,CAfM;;IAiBPC,QAAQ,CAAC;MAAE5B,KAAF;MAASuB;IAAT,CAAD,EAAoB;MAC1BzB,IAAI,CAAC+B,WAAL,CACE7B,KAAK,CAACC,KADR,EAEE,MAAM;QACJsB,MAAM,CAAC,WAAD,CAAN;QACAA,MAAM,CAAC,mBAAD,EAAsB,SAAtB,CAAN;MACD,CALH,EAME,MAAM;QACJA,MAAM,CAAC,mBAAD,EAAsB,MAAtB,CAAN;MACD,CARH;IAUD;;EA5BM;AApCI,CAAf"},"metadata":{},"sourceType":"module"}